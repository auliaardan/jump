<style>
    .zoom-effect-container {
        overflow: hidden;
    }

    .zoom-effect-container img {
        transition: transform 0.3s ease;
    }

    .zoom-effect-container img:hover {
        transform: scale(1.1);
    }
</style>
<div class="animate-on-scroll container">
    <div class="row">
        {% for seminar in seminars %}
            <li class="col-lg">
                <a href="{% url 'seminar_detail' seminar.id %}">
                    <div class="zoom-effect-container">
                        <img src="{{ seminar.image.url }}" alt="A picture of the seminar/workshop"
                             sizes="(min-width: 920px) 392px, calc(100vw - 32px)">
                    </div>
                    <h4>{{ seminar.title }}</h4>
                    <p>{{ seminar.price }}</p>
                </a>
                <button class="btn btn-secondary add-to-cart" data-seminar-id="{{ seminar.id }}"
                        {% if seminar.remaining_seats <= 0 %}disabled{% endif %}>
                    {% if seminar.remaining_seats > 0 %}
                        Add to Cart
                    {% else %}
                        Sold Out
                    {% endif %}
                </button>
            </li>
        {% endfor %}
    </div>

</div>

<script>
    $(document).ready(function () {
        $('.add-to-cart').click(function () {
            var seminarId = $(this).data('seminar-id');
            var button = $(this);

            $.ajax({
                url: "{% url 'add_to_cart' 0 %}".replace('0', seminarId),
                type: 'POST',
                data: {
                    'seminar_id': seminarId,
                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                },
                success: function (response) {
                    if (response.success) {
                        button.text('Added (' + response.quantity + ')');
                        $('p.remaining-seats-' + seminarId).text('Remaining Seats: ' + response.remaining_seats);
                        if (response.remaining_seats <= 0) {
                            button.text('Sold Out');
                            button.prop('disabled', true);
                        }
                    } else {
                        button.text('Sold Out');
                        button.prop('disabled', true);
                    }
                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                }
            });
        });
    });
</script>